import * as vite from 'vite';

interface DevRoute {
    /** 路由路径 */
    path: string;
    /** 组件名称（views 目录下的文件名，不含 .vue） */
    component: string;
    /** 路由元信息 */
    meta?: {
        title?: string;
        icon?: string;
        [key: string]: any;
    };
    /** 子路由 */
    children?: DevRoute[];
}
interface DevMenu {
    /** 菜单ID */
    id: string;
    /** 菜单标题 */
    title: string;
    /** 菜单路径 */
    path: string;
    /** 菜单图标 */
    icon?: string;
    /** 子菜单 */
    children?: DevMenu[];
}
interface GressDevConfig {
    /** 插件名称 */
    pluginName: string;
    /** 后端服务地址 */
    backendUrl?: string;
    /** 开发服务器端口 */
    port?: number;
    /** API 前缀 */
    apiPrefix?: string;
    /** 是否启用热更新 */
    hmr?: boolean;
    /** 是否自动打开浏览器 */
    open?: boolean;
    /** 路由基础路径（可选，用于子路径部署） */
    base?: string;
    /** 额外的 Vite 配置 */
    vite?: any;
    /** 代理配置 */
    proxy?: Record<string, any>;
    /** 是否自动扫描 views 目录生成路由（默认 true） */
    autoScanRoutes?: boolean;
    /** 开发环境路由配置（模拟后端返回的路由数据，会覆盖自动扫描的路由） */
    devRoutes?: DevRoute[];
    /** 开发环境菜单配置（模拟后端返回的菜单数据） */
    devMenus?: DevMenu[];
}
interface ResolvedConfig extends Required<Omit<GressDevConfig, 'vite' | 'proxy' | 'base' | 'devRoutes' | 'devMenus' | 'autoScanRoutes'>> {
    base: string;
    vite?: any;
    proxy: Record<string, any>;
    autoScanRoutes: boolean;
    devRoutes: DevRoute[];
    devMenus: DevMenu[];
}

/**
 * 加载配置文件
 */
declare function loadConfig(cwd?: string): Promise<ResolvedConfig>;
/**
 * 创建代理配置
 */
declare function createProxyConfig(config: ResolvedConfig): {
    [x: string]: any;
};

/**
 * 启动开发服务器
 */
declare function startServer(config: ResolvedConfig, cwd?: string): Promise<vite.ViteDevServer>;

export { type GressDevConfig, type ResolvedConfig, createProxyConfig, loadConfig, startServer };
