{"version":3,"sources":["../src/cli.ts","../src/config.ts","../src/route-scanner.ts","../src/server.ts","../src/vite-plugin.ts","../src/virtual-app.ts","../src/scaffold.ts"],"sourcesContent":["import { cac } from 'cac'\nimport pc from 'picocolors'\nimport { loadConfig } from './config.js'\nimport { startServer } from './server.js'\n\nconst cli = cac('gress-dev')\n\ncli\n  .command('[root]', 'Start dev server')\n  .option('-c, --config <file>', 'Use specified config file')\n  .option('-p, --port <port>', 'Port to use')\n  .option('--open', 'Open browser on startup')\n  .action(async (root = '.', options) => {\n    const cwd = root\n\n    try {\n      const config = await loadConfig(cwd)\n      \n      // ÂëΩ‰ª§Ë°åÂèÇÊï∞Ë¶ÜÁõñÈÖçÁΩÆÊñá‰ª∂\n      if (options.port) {\n        config.port = parseInt(options.port)\n      }\n      if (options.open) {\n        config.open = true\n      }\n\n      await startServer(config, cwd)\n    } catch (error: any) {\n      console.error(pc.red('\\n‚úó Error:\\n'))\n      console.error(error.message)\n      process.exit(1)\n    }\n  })\n\ncli.help()\ncli.version('1.0.0')\n\nexport async function startDevServer() {\n  cli.parse()\n}\n","import { resolve, join } from 'path'\nimport { existsSync } from 'fs'\nimport type { GressDevConfig, ResolvedConfig } from './types.js'\nimport { scanViewsDirectory, mergeRoutes } from './route-scanner.js'\n\nconst CONFIG_FILES = [\n  'gress-dev.config.js',\n  'gress-dev.config.mjs',\n  'gress-dev.config.ts'\n]\n\n/**\n * Âä†ËΩΩÈÖçÁΩÆÊñá‰ª∂\n */\nexport async function loadConfig(cwd: string = process.cwd()): Promise<ResolvedConfig> {\n  let userConfig: GressDevConfig | undefined\n\n  // Â∞ùËØïÂä†ËΩΩÈÖçÁΩÆÊñá‰ª∂\n  for (const configFile of CONFIG_FILES) {\n    const configPath = resolve(cwd, configFile)\n    if (existsSync(configPath)) {\n      try {\n        const module = await import(`file://${configPath}`)\n        userConfig = module.default || module\n        break\n      } catch (error) {\n        console.warn(`Failed to load config from ${configFile}:`, error)\n      }\n    }\n  }\n\n  if (!userConfig) {\n    throw new Error(\n      `No config file found. Please create one of: ${CONFIG_FILES.join(', ')}`\n    )\n  }\n\n  if (!userConfig.pluginName) {\n    throw new Error('pluginName is required in config')\n  }\n\n  // Ëá™Âä®Êâ´ÊèèË∑ØÁî±ÔºàÈªòËÆ§ÂºÄÂêØÔºâ\n  const autoScanRoutes = userConfig.autoScanRoutes !== false\n  let finalRoutes = userConfig.devRoutes || []\n  \n  if (autoScanRoutes) {\n    const scannedRoutes = scanViewsDirectory(cwd)\n    finalRoutes = mergeRoutes(scannedRoutes, userConfig.devRoutes || [])\n  }\n\n  // ÂêàÂπ∂ÈªòËÆ§ÈÖçÁΩÆ\n  const config: ResolvedConfig = {\n    pluginName: userConfig.pluginName,\n    backendUrl: userConfig.backendUrl || 'http://localhost:8080',\n    port: userConfig.port || 3000,\n    apiPrefix: userConfig.apiPrefix || `/api/plugin/${userConfig.pluginName}`,\n    hmr: userConfig.hmr !== false,\n    open: userConfig.open || false,\n    base: userConfig.base || '/',\n    vite: userConfig.vite,\n    proxy: userConfig.proxy || {},\n    autoScanRoutes,\n    devRoutes: finalRoutes,\n    devMenus: userConfig.devMenus || []\n  }\n\n  return config\n}\n\n/**\n * ÂàõÂª∫‰ª£ÁêÜÈÖçÁΩÆ\n */\nexport function createProxyConfig(config: ResolvedConfig) {\n  const defaultProxy = {\n    [config.apiPrefix]: {\n      target: config.backendUrl,\n      changeOrigin: true,\n      ws: true,\n      configure: (proxy: any, options: any) => {\n        proxy.on('error', (err: Error) => {\n          console.error('Proxy error:', err)\n        })\n        proxy.on('proxyReq', (proxyReq: any, req: any) => {\n          console.log(`[Proxy] ${req.method} ${req.url} -> ${options.target}${req.url}`)\n        })\n      }\n    }\n  }\n\n  return {\n    ...defaultProxy,\n    ...config.proxy\n  }\n}\n","import { readdirSync, statSync, existsSync } from 'fs'\nimport { join, relative, parse } from 'path'\nimport pc from 'picocolors'\nimport type { DevRoute } from './types.js'\n\n/**\n * Êâ´Êèè views ÁõÆÂΩïÔºåËá™Âä®ÁîüÊàêË∑ØÁî±ÈÖçÁΩÆ\n * \n * Á∫¶ÂÆöÔºö\n * - views/HomePage.vue ‚Üí path: '/'\n * - views/UserList.vue ‚Üí path: '/user-list'\n * - views/user/Detail.vue ‚Üí path: '/user/detail'\n * - views/[id].vue ‚Üí path: '/:id'\n * - views/user/[id]/Edit.vue ‚Üí path: '/user/:id/edit'\n */\nexport function scanViewsDirectory(cwd: string): DevRoute[] {\n  const viewsDir = join(cwd, 'src', 'views')\n  \n  if (!existsSync(viewsDir)) {\n    console.log(pc.yellow(`‚ö† Views directory not found: ${viewsDir}`))\n    return []\n  }\n\n  console.log(pc.cyan(`\\nüìÇ Scanning views directory...`))\n  \n  const routes: DevRoute[] = []\n  \n  function scanDirectory(dir: string, basePath: string = '') {\n    const files = readdirSync(dir)\n    \n    for (const file of files) {\n      const fullPath = join(dir, file)\n      const stat = statSync(fullPath)\n      \n      if (stat.isDirectory()) {\n        // ÈÄíÂΩíÊâ´ÊèèÂ≠êÁõÆÂΩï\n        const subPath = basePath ? `${basePath}/${file}` : file\n        scanDirectory(fullPath, subPath)\n      } else if (file.endsWith('.vue')) {\n        // Ëß£Êûê Vue Êñá‰ª∂\n        const route = parseVueFile(fullPath, viewsDir, basePath)\n        if (route) {\n          routes.push(route)\n        }\n      }\n    }\n  }\n  \n  scanDirectory(viewsDir)\n  \n  // ÊéíÂ∫èÔºöÈ¶ñÈ°µÂú®ÊúÄÂâçÈù¢\n  routes.sort((a, b) => {\n    if (a.path === '/') return -1\n    if (b.path === '/') return 1\n    return a.path.localeCompare(b.path)\n  })\n  \n  console.log(pc.green(`‚úì Found ${routes.length} routes:`))\n  routes.forEach(route => {\n    console.log(pc.dim(`  ${route.path} ‚Üí ${route.component}.vue`))\n  })\n  console.log()\n  \n  return routes\n}\n\n/**\n * Ëß£Êûê Vue Êñá‰ª∂ÔºåÁîüÊàêË∑ØÁî±ÈÖçÁΩÆ\n */\nfunction parseVueFile(filePath: string, viewsDir: string, basePath: string): DevRoute | null {\n  const relativePath = relative(viewsDir, filePath)\n  const parsed = parse(relativePath)\n  \n  // ÁªÑ‰ª∂ÂêçÁß∞ÔºöÂéªÊéâ .vue ÂêéÁºÄÔºå‰øùÁïôË∑ØÂæÑ\n  const component = relativePath.replace(/\\.vue$/, '')\n  \n  // ÁîüÊàêË∑ØÁî±Ë∑ØÂæÑ\n  let path = generateRoutePath(parsed.dir, parsed.name)\n  \n  // ÁîüÊàêÊ†áÈ¢ò\n  const title = generateTitle(parsed.name)\n  \n  return {\n    path,\n    component,\n    meta: {\n      title\n    }\n  }\n}\n\n/**\n * ÁîüÊàêË∑ØÁî±Ë∑ØÂæÑ\n * \n * ËßÑÂàôÔºö\n * - HomePage.vue ‚Üí /\n * - UserList.vue ‚Üí /user-list\n * - user/Detail.vue ‚Üí /user/detail\n * - [id].vue ‚Üí /:id\n * - user/[id]/Edit.vue ‚Üí /user/:id/edit\n */\nfunction generateRoutePath(dir: string, name: string): string {\n  // ÁâπÊÆäÂ§ÑÁêÜÔºöHomePage„ÄÅIndex„ÄÅHome ‚Üí /\n  if (!dir && (name === 'HomePage' || name === 'Index' || name === 'Home')) {\n    return '/'\n  }\n  \n  // Â§ÑÁêÜÂä®ÊÄÅË∑ØÁî±Ôºö[id] ‚Üí :id\n  const processSegment = (segment: string): string => {\n    if (segment.startsWith('[') && segment.endsWith(']')) {\n      return ':' + segment.slice(1, -1)\n    }\n    return kebabCase(segment)\n  }\n  \n  // ÊûÑÂª∫Ë∑ØÂæÑ\n  const segments: string[] = []\n  \n  // Ê∑ªÂä†ÁõÆÂΩïË∑ØÂæÑ\n  if (dir) {\n    dir.split(/[/\\\\]/).forEach(segment => {\n      segments.push(processSegment(segment))\n    })\n  }\n  \n  // Ê∑ªÂä†Êñá‰ª∂ÂêçÔºàÈô§ÈùûÊòØ IndexÔºâ\n  if (name !== 'Index' && name !== 'index') {\n    segments.push(processSegment(name))\n  }\n  \n  return '/' + segments.join('/')\n}\n\n/**\n * ÁîüÊàêÈ°µÈù¢Ê†áÈ¢ò\n * \n * UserList ‚Üí Áî®Êà∑ÂàóË°®\n * ApplicationDetail ‚Üí Â∫îÁî®ËØ¶ÊÉÖ\n */\nfunction generateTitle(name: string): string {\n  // ÁßªÈô§Â∏∏ËßÅÂêéÁºÄ\n  name = name.replace(/(Page|View|Component)$/, '')\n  \n  // PascalCase ‚Üí Á©∫Ê†ºÂàÜÈöî\n  const words = name.replace(/([A-Z])/g, ' $1').trim()\n  \n  return words\n}\n\n/**\n * PascalCase ‚Üí kebab-case\n * \n * UserList ‚Üí user-list\n * ApplicationDetail ‚Üí application-detail\n */\nfunction kebabCase(str: string): string {\n  return str\n    .replace(/([a-z])([A-Z])/g, '$1-$2')\n    .replace(/[\\s_]+/g, '-')\n    .toLowerCase()\n}\n\n/**\n * ÂêàÂπ∂Ëá™Âä®Êâ´ÊèèÁöÑË∑ØÁî±ÂíåÊâãÂä®ÈÖçÁΩÆÁöÑË∑ØÁî±\n * \n * ÊâãÂä®ÈÖçÁΩÆÁöÑË∑ØÁî±‰ºòÂÖàÁ∫ßÊõ¥È´òÔºå‰ºöË¶ÜÁõñËá™Âä®Êâ´ÊèèÁöÑË∑ØÁî±\n */\nexport function mergeRoutes(autoRoutes: DevRoute[], manualRoutes: DevRoute[]): DevRoute[] {\n  const routeMap = new Map<string, DevRoute>()\n  \n  // ÂÖàÊ∑ªÂä†Ëá™Âä®Êâ´ÊèèÁöÑË∑ØÁî±\n  autoRoutes.forEach(route => {\n    routeMap.set(route.path, route)\n  })\n  \n  // ÊâãÂä®ÈÖçÁΩÆÁöÑË∑ØÁî±Ë¶ÜÁõñËá™Âä®Êâ´ÊèèÁöÑË∑ØÁî±\n  manualRoutes.forEach(route => {\n    routeMap.set(route.path, route)\n  })\n  \n  return Array.from(routeMap.values())\n}\n","import { createServer, mergeConfig, type InlineConfig, type Connect } from 'vite'\nimport { resolve } from 'path'\nimport pc from 'picocolors'\nimport type { ResolvedConfig } from './types.js'\nimport { createProxyConfig } from './config.js'\nimport { createVirtualAppPlugin } from './vite-plugin.js'\nimport { generateScaffold } from './scaffold.js'\n\n/**\n * ÂàõÂª∫ Mock API ‰∏≠Èó¥‰ª∂\n * Áî®‰∫éÂú®ÂºÄÂèëÁéØÂ¢ÉÊ®°ÊãüÂêéÁ´ØËøîÂõûÁöÑË∑ØÁî±ÂíåËèúÂçïÊï∞ÊçÆ\n */\nfunction createMockApiMiddleware(config: ResolvedConfig): Connect.NextHandleFunction {\n  return (req, res, next) => {\n    const url = req.url || ''\n    \n    // Mock Ë∑ØÁî±ÈÖçÁΩÆ API\n    if (url === `/v2/plugins/${config.pluginName}/routes` || \n        url.startsWith(`/api/v2/plugins/${config.pluginName}/routes`)) {\n      console.log(pc.cyan(`[Mock API] GET ${url}`))\n      res.setHeader('Content-Type', 'application/json')\n      res.end(JSON.stringify({\n        code: 200,\n        data: config.devRoutes,\n        message: 'success'\n      }))\n      return\n    }\n    \n    // Mock ËèúÂçïÈÖçÁΩÆ API\n    if (url === `/v2/plugins/${config.pluginName}/menus` || \n        url.startsWith(`/api/v2/plugins/${config.pluginName}/menus`)) {\n      console.log(pc.cyan(`[Mock API] GET ${url}`))\n      res.setHeader('Content-Type', 'application/json')\n      res.end(JSON.stringify({\n        code: 200,\n        data: config.devMenus,\n        message: 'success'\n      }))\n      return\n    }\n    \n    next()\n  }\n}\n\n/**\n * ÂêØÂä®ÂºÄÂèëÊúçÂä°Âô®\n */\nexport async function startServer(config: ResolvedConfig, cwd: string = process.cwd()) {\n  console.log(pc.cyan(`\\nüöÄ Starting Gress Plugin Dev Server...\\n`))\n  console.log(pc.gray(`Plugin: ${pc.bold(config.pluginName)}`))\n  console.log(pc.gray(`Backend: ${config.backendUrl}`))\n  console.log(pc.gray(`API Prefix: ${config.apiPrefix}`))\n  \n  if (config.autoScanRoutes) {\n    console.log(pc.gray(`Auto Scan: ${pc.bold('enabled')}`))\n  }\n  \n  if (config.devRoutes.length > 0) {\n    console.log(pc.gray(`Routes: ${pc.bold(config.devRoutes.length)} routes configured`))\n  }\n  if (config.devMenus.length > 0) {\n    console.log(pc.gray(`Menus: ${pc.bold(config.devMenus.length)} menus configured`))\n  }\n  console.log()\n\n  // ÁîüÊàêËÑöÊâãÊû∂Êñá‰ª∂\n  const scaffoldDir = generateScaffold(config, cwd)\n\n  // Âü∫Á°Ä Vite ÈÖçÁΩÆ\n  const baseConfig: InlineConfig = {\n    root: scaffoldDir, // ‰ΩøÁî®ËÑöÊâãÊû∂ÁõÆÂΩï‰Ωú‰∏∫Ê†πÁõÆÂΩï\n    base: config.base,\n    server: {\n      port: config.port,\n      strictPort: false,\n      open: config.open,\n      hmr: config.hmr,\n      proxy: createProxyConfig(config),\n      fs: {\n        // ÂÖÅËÆ∏ËÆøÈóÆÈ°πÁõÆÊ†πÁõÆÂΩïÁöÑÊñá‰ª∂\n        allow: [cwd, scaffoldDir]\n      }\n    },\n    plugins: [\n      // Âä®ÊÄÅÂØºÂÖ• @vitejs/plugin-vue\n      (async () => {\n        try {\n          const { default: vue } = await import('@vitejs/plugin-vue')\n          return vue()\n        } catch (error) {\n          console.error(pc.red('\\n‚úó @vitejs/plugin-vue not found'))\n          console.error(pc.yellow('Please install it: npm install @vitejs/plugin-vue --save-dev\\n'))\n          throw error\n        }\n      })(),\n      createVirtualAppPlugin(config, cwd) // ‰º†ÂÖ•È°πÁõÆÊ†πÁõÆÂΩï\n    ],\n    define: {\n      '__PLUGIN_NAME__': JSON.stringify(config.pluginName),\n      '__API_PREFIX__': JSON.stringify(config.apiPrefix),\n      '__BACKEND_URL__': JSON.stringify(config.backendUrl)\n    },\n    optimizeDeps: {\n      include: ['vue', 'vue-router', 'pinia']\n    },\n    resolve: {\n      alias: {\n        '@': resolve(cwd, 'src'),\n        // ÂÖ≥ÈîÆÔºöËÆ©ËôöÊãüÊ®°Âùó‰∏≠ÁöÑ /src ÊåáÂêëÈ°πÁõÆÊ†πÁõÆÂΩïÁöÑ src\n        '/src': resolve(cwd, 'src')\n      }\n    }\n  }\n\n  // ÂêàÂπ∂Áî®Êà∑Ëá™ÂÆö‰πâ Vite ÈÖçÁΩÆ\n  const finalConfig = config.vite \n    ? mergeConfig(baseConfig, config.vite)\n    : baseConfig\n\n  try {\n    const server = await createServer(finalConfig)\n    \n    // Ê∑ªÂä† Mock API ‰∏≠Èó¥‰ª∂ÔºàÂøÖÈ°ªÂú® listen ‰πãÂâçÔºâ\n    if (config.devRoutes.length > 0 || config.devMenus.length > 0) {\n      // Âú®ÊâÄÊúâ‰∏≠Èó¥‰ª∂‰πãÂâçÊèíÂÖ• Mock API ‰∏≠Èó¥‰ª∂\n      server.middlewares.stack.unshift({\n        route: '',\n        handle: createMockApiMiddleware(config)\n      })\n      console.log(pc.green(`‚úì Mock API middleware enabled`))\n    }\n    \n    await server.listen()\n\n    const info = server.config.logger.info\n    const serverUrl = server.resolvedUrls?.local[0] || `http://localhost:${config.port}`\n\n    console.log()\n    info(pc.green(`‚úì Dev server running at:`))\n    info(pc.cyan(`  ${serverUrl}`))\n    console.log()\n    info(pc.gray(`Backend proxy: ${pc.bold(config.backendUrl)}`))\n    info(pc.gray(`API requests to ${pc.bold(config.apiPrefix)} will be proxied`))\n    \n    if (config.devRoutes.length > 0) {\n      console.log()\n      info(pc.gray(`Mock routes available:`))\n      config.devRoutes.forEach(route => {\n        info(pc.dim(`  ${route.path} ‚Üí ${route.component}.vue`))\n      })\n    }\n    \n    console.log()\n    info(pc.dim(`Press ${pc.bold('h')} to show help, ${pc.bold('q')} to quit`))\n    console.log()\n\n    // ÁõëÂê¨ËøõÁ®ãÈÄÄÂá∫\n    process.on('SIGTERM', () => server.close())\n    process.on('SIGINT', () => server.close())\n\n    return server\n  } catch (error) {\n    console.error(pc.red('\\n‚úó Failed to start dev server:\\n'))\n    console.error(error)\n    process.exit(1)\n  }\n}\n","import type { Plugin } from 'vite'\nimport { resolve } from 'path'\nimport type { ResolvedConfig } from './types.js'\nimport { generateVirtualRouter } from './virtual-app.js'\n\n// ËôöÊãüÊ®°Âùó ID\nconst VIRTUAL_ROUTER_ID = 'virtual:gress-dev-router'\nconst RESOLVED_ROUTER_ID = '\\0' + VIRTUAL_ROUTER_ID\n\n/**\n * Vite Êèí‰ª∂ÔºöÊ≥®ÂÖ•ËôöÊãüË∑ØÁî±Á≥ªÁªü\n */\nexport function createVirtualAppPlugin(config: ResolvedConfig, projectRoot: string): Plugin {\n  return {\n    name: 'vite-plugin-gress-dev-virtual-app',\n    \n    // Ëß£ÊûêËôöÊãüÊ®°Âùó ID\n    resolveId(id, importer) {\n      if (id === VIRTUAL_ROUTER_ID) {\n        return RESOLVED_ROUTER_ID\n      }\n      \n      // Â§ÑÁêÜ‰ªéËôöÊãüË∑ØÁî±Ê®°ÂùóÂØºÂÖ•ÁöÑÁªÑ‰ª∂\n      if (importer === RESOLVED_ROUTER_ID && id.startsWith('../src/views/')) {\n        // Â∞ÜÁõ∏ÂØπË∑ØÂæÑËΩ¨Êç¢‰∏∫ÁªùÂØπË∑ØÂæÑ\n        const componentPath = id.replace('../src/views/', '')\n        const absolutePath = resolve(projectRoot, 'src/views', componentPath)\n        return absolutePath\n      }\n      \n      return null\n    },\n    \n    // Âä†ËΩΩËôöÊãüÊ®°ÂùóÂÜÖÂÆπ\n    load(id) {\n      if (id === RESOLVED_ROUTER_ID) {\n        // ‰º†ÂÖ•Ë∑ØÁî±ÈÖçÁΩÆÔºåÁîüÊàêÂåÖÂê´ÊòæÂºè import ÁöÑ‰ª£Á†Å\n        return generateVirtualRouter(config.pluginName, projectRoot, config.devRoutes)\n      }\n      return null\n    },\n    \n    // ÈÖçÁΩÆ Vite\n    config() {\n      return {\n        // ËÆæÁΩÆÂÖ•Âè£Êñá‰ª∂\n        build: {\n          rollupOptions: {\n            input: {\n              main: `${projectRoot}/.gress-dev/index.html`\n            }\n          }\n        }\n      }\n    }\n  }\n}\n","/**\n * ËôöÊãüÂ∫îÁî®Ê®°Êùø\n * \n * ‰∏∫Êèí‰ª∂ÂâçÁ´ØËá™Âä®ÁîüÊàêË∑ØÁî±Á≥ªÁªü\n */\n\nimport type { DevRoute } from './types.js'\n\n/**\n * ÁîüÊàêÁªÑ‰ª∂ÂØºÂÖ•ËØ≠Âè•\n */\nfunction generateComponentImports(routes: DevRoute[]): string {\n  const imports: string[] = []\n  const seen = new Set<string>()\n  \n  function collectComponents(routeList: DevRoute[]) {\n    routeList.forEach(route => {\n      const component = route.component\n      if (!seen.has(component)) {\n        seen.add(component)\n        const importName = component.replace(/[\\/\\-]/g, '_')\n        // ‰ΩøÁî®Áõ∏ÂØπË∑ØÂæÑ‰ªé .gress-dev/ ÂØºÂÖ•\n        imports.push(`import ${importName} from '../src/views/${component}.vue'`)\n      }\n      if (route.children) {\n        collectComponents(route.children)\n      }\n    })\n  }\n  \n  collectComponents(routes)\n  return imports.join('\\n')\n}\n\n/**\n * ÁîüÊàêÁªÑ‰ª∂Êò†Â∞ÑÂØπË±°\n */\nfunction generateComponentMap(routes: DevRoute[]): string {\n  const entries: string[] = []\n  const seen = new Set<string>()\n  \n  function collectComponents(routeList: DevRoute[]) {\n    routeList.forEach(route => {\n      const component = route.component\n      if (!seen.has(component)) {\n        seen.add(component)\n        const importName = component.replace(/[\\/\\-]/g, '_')\n        entries.push(`  '${component}': ${importName}`)\n      }\n      if (route.children) {\n        collectComponents(route.children)\n      }\n    })\n  }\n  \n  collectComponents(routes)\n  return `{\\n${entries.join(',\\n')}\\n}`\n}\n\n/**\n * ËôöÊãü router/index.ts\n */\nexport function generateVirtualRouter(pluginName: string, projectRoot: string, routes: DevRoute[]): string {\n  const componentImports = generateComponentImports(routes)\n  const componentMap = generateComponentMap(routes)\n  \n  return `import { createRouter, createWebHistory } from 'vue-router'\n\n// ÂØºÂÖ•ÊâÄÊúâÈúÄË¶ÅÁöÑÁªÑ‰ª∂\n${componentImports}\n\n// ÁªÑ‰ª∂Êò†Â∞ÑË°®\nconst componentMap = ${componentMap}\n\nconsole.log('[Gress Dev Router] Available components:', Object.keys(componentMap))\nconsole.log('[Gress Dev Router] Project root: ${projectRoot}')\n\n/**\n * Ëß£ÊûêÁªÑ‰ª∂Ë∑ØÂæÑ\n */\nfunction resolveComponent(componentPath) {\n  const component = componentMap[componentPath]\n  \n  if (!component) {\n    console.error(\\`[Gress Dev Router] Component not found: \\${componentPath}\\`)\n    console.log('[Gress Dev Router] Available:', Object.keys(componentMap))\n    return () => Promise.resolve({\n      template: \\`<div style=\"padding: 20px; color: red;\">\n        <h2>ÁªÑ‰ª∂Êú™ÊâæÂà∞</h2>\n        <p>Ë∑ØÂæÑ: \\${componentPath}</p>\n        <details>\n          <summary>ÂèØÁî®ÁªÑ‰ª∂</summary>\n          <pre>\\${Object.keys(componentMap).join('\\\\n')}</pre>\n        </details>\n      </div>\\`\n    })\n  }\n  \n  return component\n}\n\n/**\n * ‰ªéÂºÄÂèëÊúçÂä°Âô®Ëé∑ÂèñË∑ØÁî±ÈÖçÁΩÆ\n */\nasync function fetchRoutes() {\n  try {\n    console.log('[Gress Dev Router] Fetching routes from /v2/plugins/${pluginName}/routes')\n    const response = await fetch('/v2/plugins/${pluginName}/routes')\n    const data = await response.json()\n    console.log('[Gress Dev Router] Routes response:', data)\n    return data.data || []\n  } catch (error) {\n    console.error('[Gress Dev Router] Failed to fetch routes:', error)\n    return []\n  }\n}\n\n/**\n * ËΩ¨Êç¢Ë∑ØÁî±ÈÖçÁΩÆ‰∏∫ Vue Router Ê†ºÂºè\n */\nfunction convertToVueRoutes(routes) {\n  return routes.map(route => {\n    const vueRoute = {\n      path: route.path,\n      name: route.component.replace(/[\\\\/]/g, '-'),\n      component: resolveComponent(route.component),\n      meta: route.meta || {}\n    }\n    \n    // Â§ÑÁêÜÂ≠êË∑ØÁî±\n    if (route.children && route.children.length > 0) {\n      vueRoute.children = convertToVueRoutes(route.children)\n    }\n    \n    return vueRoute\n  })\n}\n\n// ÂàõÂª∫Ë∑ØÁî±ÂÆû‰æã\nconst router = createRouter({\n  history: createWebHistory(),\n  routes: [] // ÂàùÂßã‰∏∫Á©∫ÔºåÂä®ÊÄÅÂä†ËΩΩ\n})\n\n// ÂàùÂßãÂåñË∑ØÁî±\nexport async function initRouter() {\n  console.log('[Gress Dev Router] Initializing...')\n  \n  const routeConfigs = await fetchRoutes()\n  console.log('[Gress Dev Router] Fetched route configs:', routeConfigs)\n  \n  if (routeConfigs.length === 0) {\n    console.warn('[Gress Dev Router] No routes found, adding fallback route')\n    router.addRoute({\n      path: '/:pathMatch(.*)*',\n      component: () => Promise.resolve({\n        template: \\`<div style=\"padding: 20px;\">\n          <h2>Êú™ÊâæÂà∞Ë∑ØÁî±ÈÖçÁΩÆ</h2>\n          <p>ËØ∑Ê£ÄÊü• gress-dev.config.js ‰∏≠ÁöÑ devRoutes ÈÖçÁΩÆ</p>\n          <p>ÊàñÁ°Æ‰øù src/views ÁõÆÂΩï‰∏ãÊúâ .vue Êñá‰ª∂</p>\n        </div>\\`\n      })\n    })\n    return\n  }\n  \n  const vueRoutes = convertToVueRoutes(routeConfigs)\n  console.log('[Gress Dev Router] Converted Vue routes:', vueRoutes)\n  \n  // Âä®ÊÄÅÊ∑ªÂä†Ë∑ØÁî±\n  vueRoutes.forEach(route => {\n    router.addRoute(route)\n    console.log(\\`[Gress Dev Router] Added route: \\${route.path} -> \\${route.name}\\`)\n  })\n  \n  console.log('[Gress Dev Router] Total routes registered:', router.getRoutes().length)\n  console.log('[Gress Dev Router] Route paths:', router.getRoutes().map(r => r.path))\n}\n\nexport default router\n`\n}\n\n","import { mkdirSync, writeFileSync, existsSync } from 'fs'\nimport { join } from 'path'\nimport type { ResolvedConfig } from './types.js'\n\n/**\n * ÁîüÊàêÂºÄÂèëÁéØÂ¢ÉÊâÄÈúÄÁöÑËÑöÊâãÊû∂Êñá‰ª∂\n */\nexport function generateScaffold(config: ResolvedConfig, cwd: string) {\n  const scaffoldDir = join(cwd, '.gress-dev')\n  \n  // ÂàõÂª∫ÁõÆÂΩï\n  if (!existsSync(scaffoldDir)) {\n    mkdirSync(scaffoldDir, { recursive: true })\n  }\n  \n  // ÁîüÊàê index.html\n  const indexHtml = `<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Gress Plugin Dev - ${config.pluginName}</title>\n</head>\n<body>\n  <div id=\"app\"></div>\n  <script type=\"module\" src=\"./main.ts\"></script>\n</body>\n</html>\n`\n  \n  // ÁîüÊàê main.ts\n  const mainTs = `import { createApp } from 'vue'\nimport App from './App.vue'\nimport router, { initRouter } from 'virtual:gress-dev-router'\n\n// ÂàõÂª∫Ê®°ÊãüÁöÑ GressBridge\nfunction createMockGressBridge() {\n  const bridge = {\n    http: {\n      request: async (config) => {\n        console.log('[Mock Bridge] HTTP request:', config)\n        return { data: null, status: 200, statusText: 'OK' }\n      },\n      get: async (url, config) => {\n        console.log('[Mock Bridge] GET:', url)\n        return { data: null, status: 200, statusText: 'OK' }\n      },\n      post: async (url, data, config) => {\n        console.log('[Mock Bridge] POST:', url, data)\n        return { data: null, status: 200, statusText: 'OK' }\n      },\n      put: async (url, data, config) => {\n        console.log('[Mock Bridge] PUT:', url, data)\n        return { data: null, status: 200, statusText: 'OK' }\n      },\n      delete: async (url, config) => {\n        console.log('[Mock Bridge] DELETE:', url)\n        return { data: null, status: 200, statusText: 'OK' }\n      },\n      getBaseURL: () => '${config.backendUrl}'\n    },\n    router: {\n      push: (to) => {\n        console.log('[Mock Bridge] Router push:', to)\n        return router.push(to)\n      },\n      replace: (to) => {\n        console.log('[Mock Bridge] Router replace:', to)\n        return router.replace(to)\n      },\n      back: () => {\n        console.log('[Mock Bridge] Router back')\n        router.back()\n      },\n      forward: () => {\n        console.log('[Mock Bridge] Router forward')\n        router.forward()\n      },\n      currentRoute: router.currentRoute\n    },\n    events: {\n      on: (event, handler) => {\n        console.log('[Mock Bridge] Event on:', event)\n        return { unsubscribe: () => {} }\n      },\n      emit: (event, data) => {\n        console.log('[Mock Bridge] Event emit:', event, data)\n      },\n      off: (event, handler) => {\n        console.log('[Mock Bridge] Event off:', event)\n      }\n    },\n    notification: {\n      success: (message, options) => {\n        console.log('[Mock Bridge] Notification success:', message)\n        alert(\\`‚úì \\${message}\\`)\n      },\n      error: (message, options) => {\n        console.error('[Mock Bridge] Notification error:', message)\n        alert(\\`‚úó \\${message}\\`)\n      },\n      warning: (message, options) => {\n        console.warn('[Mock Bridge] Notification warning:', message)\n        alert(\\`‚ö† \\${message}\\`)\n      },\n      info: (message, options) => {\n        console.info('[Mock Bridge] Notification info:', message)\n        alert(\\`‚Ñπ \\${message}\\`)\n      }\n    },\n    storage: {\n      get: (key) => {\n        const value = localStorage.getItem(\\`gress_plugin_\\${key}\\`)\n        return value ? JSON.parse(value) : null\n      },\n      set: (key, value) => {\n        localStorage.setItem(\\`gress_plugin_\\${key}\\`, JSON.stringify(value))\n      },\n      remove: (key) => {\n        localStorage.removeItem(\\`gress_plugin_\\${key}\\`)\n      },\n      clear: () => {\n        Object.keys(localStorage).forEach(key => {\n          if (key.startsWith('gress_plugin_')) {\n            localStorage.removeItem(key)\n          }\n        })\n      }\n    },\n    ui: {\n      message: {\n        success: (msg) => alert(\\`‚úì \\${msg}\\`),\n        error: (msg) => alert(\\`‚úó \\${msg}\\`),\n        warning: (msg) => alert(\\`‚ö† \\${msg}\\`),\n        info: (msg) => alert(\\`‚Ñπ \\${msg}\\`)\n      }\n    },\n    version: '1.0.0-mock'\n  }\n  \n  // Ê≥®ÂÖ•Âà∞ÂÖ®Â±Ä\n  window.GressBridge = bridge\n  \n  return bridge\n}\n\nasync function bootstrap() {\n  console.log('[Gress Dev] Initializing plugin: ${config.pluginName}')\n  \n  // ÂàõÂª∫Âπ∂Ê≥®ÂÖ•Ê®°Êãü Bridge\n  const bridge = createMockGressBridge()\n  console.log('[Gress Dev] Mock GressBridge injected')\n  \n  const app = createApp(App)\n  \n  // ÂàùÂßãÂåñË∑ØÁî±\n  await initRouter()\n  \n  // Ê≥®ÂÜåË∑ØÁî±\n  app.use(router)\n  \n  // ÊåÇËΩΩÂ∫îÁî®\n  app.mount('#app')\n  \n  console.log('[Gress Dev] Application mounted')\n  console.log('[Gress Dev] Available routes:', router.getRoutes().map(r => r.path))\n  console.log('[Gress Dev] GressBridge available at window.GressBridge')\n}\n\nbootstrap().catch(err => {\n  console.error('[Gress Dev] Bootstrap failed:', err)\n  document.body.innerHTML = \\`\n    <div style=\"padding: 20px; color: red;\">\n      <h2>ÂêØÂä®Â§±Ë¥•</h2>\n      <pre>\\${err.stack || err.message}</pre>\n    </div>\n  \\`\n})\n`\n  \n  // ÁîüÊàê App.vue\n  const appVue = `<template>\n  <div id=\"gress-dev-app\">\n    <router-view v-slot=\"{ Component }\">\n      <transition name=\"fade\" mode=\"out-in\">\n        <component :is=\"Component\" />\n      </transition>\n    </router-view>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { onMounted } from 'vue'\nimport { useRouter } from 'vue-router'\n\nconst router = useRouter()\n\nonMounted(() => {\n  console.log('[Gress Dev] App mounted')\n})\n</script>\n\n<style>\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n#gress-dev-app {\n  width: 100%;\n  min-height: 100vh;\n}\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.2s ease;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n</style>\n`\n  \n  // ÂÜôÂÖ•Êñá‰ª∂\n  writeFileSync(join(scaffoldDir, 'index.html'), indexHtml)\n  writeFileSync(join(scaffoldDir, 'main.ts'), mainTs)\n  writeFileSync(join(scaffoldDir, 'App.vue'), appVue)\n  \n  console.log(`[Gress Dev] Scaffold files generated in ${scaffoldDir}`)\n  \n  return scaffoldDir\n}\n"],"mappings":"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","names":["pc","existsSync","existsSync","resolve","pc","resolve","resolve","existsSync","join","pc","resolve","pc"]}