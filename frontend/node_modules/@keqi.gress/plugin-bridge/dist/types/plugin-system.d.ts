/**
 * Gress 插件系统核心类型定义
 *
 * 设计原则：
 * 1. 类型安全：所有接口都有明确的类型定义
 * 2. 可扩展：使用泛型和接口组合支持扩展
 * 3. 向后兼容：保持 API 稳定性
 */
import type { Component } from 'vue';
import type { Router, RouteRecordRaw } from 'vue-router';
import type { Pinia } from 'pinia';
/**
 * 插件 ID 类型
 */
export type PluginId = string;
/**
 * 插件版本类型（遵循 SemVer）
 */
export type PluginVersion = string;
/**
 * 插件状态
 */
export declare enum PluginStatus {
    /** 未安装 */
    UNINSTALLED = "uninstalled",
    /** 安装中 */
    INSTALLING = "installing",
    /** 已安装但未激活 */
    INSTALLED = "installed",
    /** 激活中 */
    ACTIVATING = "activating",
    /** 已激活（运行中） */
    ACTIVE = "active",
    /** 停用中 */
    DEACTIVATING = "deactivating",
    /** 已停用 */
    DEACTIVATED = "deactivated",
    /** 卸载中 */
    UNINSTALLING = "uninstalling",
    /** 错误状态 */
    ERROR = "error"
}
/**
 * 插件加载策略
 */
export declare enum LoadStrategy {
    /** 立即加载 */
    EAGER = "eager",
    /** 懒加载（首次使用时） */
    LAZY = "lazy",
    /** 预加载（空闲时） */
    PREFETCH = "prefetch",
    /** 按需加载 */
    ON_DEMAND = "on-demand"
}
/**
 * 插件清单 - 描述插件的元数据和能力
 */
export interface PluginManifest<TConfig = any> {
    /** 插件唯一标识 */
    id: PluginId;
    /** 插件名称 */
    name: string;
    /** 插件版本 */
    version: PluginVersion;
    /** 插件描述 */
    description?: string;
    /** 作者信息 */
    author?: string | {
        name: string;
        email?: string;
        url?: string;
    };
    /** 主页 URL */
    homepage?: string;
    /** 仓库 URL */
    repository?: string;
    /** 许可证 */
    license?: string;
    /** 关键词 */
    keywords?: string[];
    /** 插件图标 */
    icon?: string;
    /** 依赖 */
    dependencies?: {
        /** 主应用版本要求 */
        host?: PluginVersion;
        /** 其他插件依赖 */
        plugins?: Record<PluginId, PluginVersion>;
    };
    /** 权限声明 */
    permissions?: PluginPermission[];
    /** 加载策略 */
    loadStrategy?: LoadStrategy;
    /**
     * 组件注册表（名称 -> 组件或懒加载工厂）
     * 用于通过字符串名称（来自 plugin-ui.yml 等配置）查找组件实例
     */
    components?: Record<string, Component | (() => Promise<Component>)>;
    /**
     * 布局注册表（布局名称 -> 布局组件）
     * 用于注册插件的自定义布局，支持 standalone 路由类型
     *
     * @example
     * ```typescript
     * layouts: {
     *   portal: PortalLayout,
     *   admin: AdminLayout
     * }
     * ```
     */
    layouts?: Record<string, Component>;
    /**
     * 主题注册表（主题名称 -> 主题配置）
     * 用于注册插件的自定义主题，支持亮色/暗色主题
     *
     * @example
     * ```typescript
     * themes: {
     *   light: {
     *     name: '亮色主题',
     *     type: 'light',
     *     primaryColor: '#1890ff',
     *     backgroundColor: '#ffffff'
     *   },
     *   dark: {
     *     name: '暗色主题',
     *     type: 'dark',
     *     primaryColor: '#409eff',
     *     backgroundColor: '#1a1a1a'
     *   }
     * }
     * ```
     */
    themes?: Record<string, ThemeConfig & {
        name?: string;
        type?: 'light' | 'dark';
    }>;
    /** 扩展点 */
    extensions?: PluginExtensions;
    /** 生命周期钩子 */
    lifecycle?: PluginLifecycle;
    /** 配置 Schema */
    config?: {
        schema?: any;
        default?: TConfig;
    };
    /** 额外的元数据 */
    extra?: Record<string, any>;
}
/**
 * 插件扩展点集合
 */
export interface PluginExtensions {
    /** 路由扩展 */
    routes?: RouteExtension[];
    /** 组件扩展 */
    components?: ComponentExtension[];
    /** 菜单扩展 */
    menus?: MenuExtension[];
    /** 工具栏扩展 */
    toolbars?: ToolbarExtension[];
    /** 面板扩展 */
    panels?: PanelExtension[];
    /** 中间件扩展 */
    middlewares?: MiddlewareExtension[];
    /** 命令扩展 */
    commands?: CommandExtension[];
    /** 快捷键扩展 */
    keybindings?: KeybindingExtension[];
    /** 主题扩展 */
    themes?: ThemeExtension[];
    /** 数据源扩展 */
    dataSources?: DataSourceExtension[];
}
/**
 * 路由扩展
 */
export interface RouteExtension {
    /** 路由路径 */
    path: string;
    /** 路由名称 */
    name?: string;
    /** 路由组件 */
    component: Component;
    /** 路由元信息 */
    meta?: Record<string, any>;
    /** 路由类型：layout表示需要主布局包裹，standalone表示独立页面 (默认: layout) */
    type?: 'layout' | 'standalone';
    /** 子路由 */
    children?: RouteExtension[];
    /** 路由守卫 */
    beforeEnter?: (to: any, from: any, next: any) => void;
}
/**
 * 组件扩展
 */
export interface ComponentExtension {
    /** 组件名称 */
    name: string;
    /** 组件实现 */
    component: Component;
    /** 是否全局注册 */
    global?: boolean;
    /** 组件分类 */
    category?: string;
    /** 组件描述 */
    description?: string;
    /** 组件预览图 */
    preview?: string;
}
/**
 * 菜单扩展
 */
export interface MenuExtension {
    /** 菜单 ID */
    id: string;
    /** 菜单标题 */
    title: string;
    /** 菜单图标 */
    icon?: string;
    /** 菜单路径 */
    path?: string;
    /** 父菜单 ID */
    parent?: string;
    /** 排序权重 */
    order?: number;
    /** 是否显示 */
    visible?: boolean | (() => boolean);
    /** 菜单类型：layout表示需要主布局包裹，standalone表示独立页面 (默认: layout) */
    type?: 'layout' | 'standalone';
    /** 子菜单 */
    children?: MenuExtension[];
}
/**
 * 工具栏扩展
 */
export interface ToolbarExtension {
    /** 工具栏 ID */
    id: string;
    /** 工具栏位置 */
    position: 'left' | 'right' | 'center';
    /** 工具栏组件 */
    component: Component;
    /** 排序权重 */
    order?: number;
    /** 是否显示 */
    visible?: boolean | (() => boolean);
}
/**
 * 面板扩展
 */
export interface PanelExtension {
    /** 面板 ID */
    id: string;
    /** 面板标题 */
    title: string;
    /** 面板组件 */
    component: Component;
    /** 面板位置 */
    position?: 'left' | 'right' | 'bottom' | 'modal';
    /** 面板图标 */
    icon?: string;
    /** 是否默认打开 */
    defaultOpen?: boolean;
}
/**
 * 中间件扩展
 */
export interface MiddlewareExtension {
    /** 中间件名称 */
    name: string;
    /** 中间件处理函数 */
    handler: (context: any, next: () => void) => void | Promise<void>;
    /** 执行顺序 */
    order?: number;
}
/**
 * 命令扩展
 */
export interface CommandExtension {
    /** 命令 ID */
    id: string;
    /** 命令标题 */
    title: string;
    /** 命令分类 */
    category?: string;
    /** 命令处理函数 */
    handler: (...args: any[]) => void | Promise<void>;
    /** 命令图标 */
    icon?: string;
    /** 是否启用 */
    enabled?: boolean | (() => boolean);
}
/**
 * 快捷键扩展
 */
export interface KeybindingExtension {
    /** 快捷键组合 */
    key: string;
    /** 绑定的命令 ID */
    command: string;
    /** 快捷键作用域 */
    when?: string;
}
/**
 * 主题扩展
 */
export interface ThemeExtension {
    /** 主题 ID */
    id: string;
    /** 主题名称 */
    name: string;
    /** 主题类型 */
    type: 'light' | 'dark';
    /** 主题变量 */
    variables: Record<string, string>;
    /** 主题样式 */
    styles?: string;
}
/**
 * 主题配置接口
 * 用于定义插件的自定义主题
 */
export interface ThemeConfig {
    /** 主色 */
    primaryColor?: string;
    /** 成功色 */
    successColor?: string;
    /** 警告色 */
    warningColor?: string;
    /** 错误色 */
    errorColor?: string;
    /** 信息色 */
    infoColor?: string;
    /** 背景色 */
    backgroundColor?: string;
    /** 表面色 */
    surfaceColor?: string;
    /** 主要文字色 */
    textPrimaryColor?: string;
    /** 次要文字色 */
    textSecondaryColor?: string;
    /** 第三级文字色 */
    textTertiaryColor?: string;
    /** 边框色 */
    borderColor?: string;
    /** 圆角大小 */
    borderRadius?: string;
    /** 间距配置 */
    spacing?: {
        /** 超小间距 (4px) */
        xs?: string;
        /** 小间距 (8px) */
        sm?: string;
        /** 中等间距 (16px) */
        md?: string;
        /** 大间距 (24px) */
        lg?: string;
        /** 超大间距 (32px) */
        xl?: string;
    };
    /** 字体大小 */
    fontSize?: string;
    /** 字体族 */
    fontFamily?: string;
    /** 盒阴影 */
    boxShadow?: string;
    /** 头部高度 */
    headerHeight?: string;
    /** 侧边栏宽度 */
    sidebarWidth?: string;
    /** 底部高度 */
    footerHeight?: string;
    /** 自定义CSS变量映射 */
    customVars?: Record<string, string>;
}
/**
 * 数据源扩展
 */
export interface DataSourceExtension {
    /** 数据源 ID */
    id: string;
    /** 数据源名称 */
    name: string;
    /** 数据源类型 */
    type: string;
    /** 数据获取函数 */
    fetch: (params?: any) => Promise<any>;
    /** 数据转换函数 */
    transform?: (data: any) => any;
}
/**
 * 插件生命周期钩子
 */
export interface PluginLifecycle {
    /**
     * 安装钩子 - 插件首次加载时调用
     * 用于初始化插件、注册扩展点等
     */
    install?: (context: PluginContext) => void | Promise<void>;
    /**
     * 激活钩子 - 插件被激活时调用
     * 用于启动插件功能、订阅事件等
     */
    activate?: (context: PluginContext) => void | Promise<void>;
    /**
     * 停用钩子 - 插件被停用时调用
     * 用于清理资源、取消订阅等
     */
    deactivate?: (context: PluginContext) => void | Promise<void>;
    /**
     * 卸载钩子 - 插件被卸载时调用
     * 用于完全清理插件痕迹
     */
    uninstall?: (context: PluginContext) => void | Promise<void>;
    /**
     * 配置变更钩子
     */
    onConfigChange?: (newConfig: any, oldConfig: any) => void | Promise<void>;
    /**
     * 错误处理钩子
     */
    onError?: (error: PluginError) => void;
}
/**
 * 插件上下文 - 提供给插件的运行时环境
 */
export interface PluginContext {
    /** 插件 ID */
    pluginId: PluginId;
    /** 插件清单 */
    manifest: PluginManifest;
    /** 插件桥 - 访问主应用能力 */
    bridge: PluginBridge;
    /** 插件配置 */
    config: any;
    /** 插件存储 */
    storage: PluginStorage;
    /** 插件日志 */
    logger: PluginLogger;
    /** 订阅管理 */
    subscriptions: PluginSubscriptions;
}
/**
 * 插件桥 - 主应用暴露给插件的 API
 */
export interface PluginBridge {
    /** 版本信息 */
    version: string;
    /** HTTP 客户端 */
    http: HttpClient;
    /** 路由 */
    router: RouterBridge;
    /** 状态管理 */
    store: StoreBridge;
    /** UI 组件库 */
    ui: UIBridge;
    /** 事件总线 */
    events: EventBus;
    /** 工具函数 */
    utils: UtilsBridge;
    /** 权限系统 */
    auth: AuthBridge;
    /** 国际化 */
    i18n: I18nBridge;
    /** 通知系统 */
    notification: NotificationBridge;
}
/**
 * HTTP 客户端接口
 */
export interface HttpClient {
    get<T = any>(url: string, config?: any): Promise<T>;
    post<T = any>(url: string, data?: any, config?: any): Promise<T>;
    put<T = any>(url: string, data?: any, config?: any): Promise<T>;
    delete<T = any>(url: string, config?: any): Promise<T>;
    patch<T = any>(url: string, data?: any, config?: any): Promise<T>;
    request<T = any>(config: any): Promise<T>;
}
/**
 * 路由守卫类型
 */
export type NavigationGuard = (to: any, from: any, next: any) => void | Promise<void>;
/**
 * 路由守卫移除函数
 */
export type NavigationGuardRemover = () => void;
/**
 * 路由桥接口
 */
export interface RouterBridge {
    push: Router['push'];
    replace: Router['replace'];
    go: Router['go'];
    back: Router['back'];
    forward: Router['forward'];
    currentRoute: any;
    addRoute: (route: RouteRecordRaw) => void;
    removeRoute: (name: string) => void;
    hasRoute: (name: string) => boolean;
    getRoutes: () => RouteRecordRaw[];
    /** 注册全局前置守卫 */
    beforeEach: (guard: NavigationGuard) => NavigationGuardRemover;
    /** 注册全局后置钩子 */
    afterEach: (hook: (to: any, from: any) => void) => NavigationGuardRemover;
    /** 注册全局解析守卫 */
    beforeResolve: (guard: NavigationGuard) => NavigationGuardRemover;
}
/**
 * 状态管理桥接口
 */
export interface StoreBridge {
    pinia: Pinia;
    getStore: <T = any>(id: string) => T | undefined;
    hasStore: (id: string) => boolean;
}
/**
 * UI 组件库桥接口
 */
export interface UIBridge {
    /** NaiveUI 组件 */
    components: Record<string, Component>;
    /** NaiveUI API */
    message: any;
    dialog: any;
    notification: any;
    loadingBar: any;
    /** 主题 */
    theme: {
        current: string;
        set: (theme: string) => void;
        get: () => string;
    };
}
/**
 * 事件总线接口
 */
export interface EventBus {
    on: (event: string, handler: Function) => void;
    off: (event: string, handler: Function) => void;
    once: (event: string, handler: Function) => void;
    emit: (event: string, ...args: any[]) => void;
}
/**
 * 工具函数桥接口
 */
export interface UtilsBridge {
    /** 日期格式化 */
    formatDate: (date: Date | string, format: string) => string;
    /** 深拷贝 */
    deepClone: <T>(obj: T) => T;
    /** 防抖 */
    debounce: <T extends (...args: any[]) => any>(fn: T, delay: number) => T;
    /** 节流 */
    throttle: <T extends (...args: any[]) => any>(fn: T, delay: number) => T;
    /** UUID 生成 */
    uuid: () => string;
}
/**
 * 权限系统桥接口
 */
export interface AuthBridge {
    /** 检查权限 */
    hasPermission: (permission: string) => boolean;
    /** 请求权限 */
    requestPermission: (permission: string) => Promise<boolean>;
    /** 获取当前用户 */
    getCurrentUser: () => any;
    /** 检查是否登录 */
    isAuthenticated: () => boolean;
}
/**
 * 国际化桥接口
 */
export interface I18nBridge {
    /** 当前语言 */
    locale: string;
    /** 翻译 */
    t: (key: string, params?: Record<string, any>) => string;
    /** 设置语言 */
    setLocale: (locale: string) => void;
    /** 添加翻译 */
    addMessages: (locale: string, messages: Record<string, string>) => void;
}
/**
 * 通知系统桥接口
 */
export interface NotificationBridge {
    success: (message: string, options?: any) => void;
    error: (message: string, options?: any) => void;
    warning: (message: string, options?: any) => void;
    info: (message: string, options?: any) => void;
}
/**
 * 插件存储接口
 */
export interface PluginStorage {
    /** 获取值 */
    get: <T = any>(key: string, defaultValue?: T) => T | undefined;
    /** 设置值 */
    set: (key: string, value: any) => void;
    /** 删除值 */
    remove: (key: string) => void;
    /** 清空存储 */
    clear: () => void;
    /** 获取所有键 */
    keys: () => string[];
    /** 检查键是否存在 */
    has: (key: string) => boolean;
}
/**
 * 日志级别
 */
export declare enum LogLevel {
    DEBUG = "debug",
    INFO = "info",
    WARN = "warn",
    ERROR = "error"
}
/**
 * 插件日志接口
 */
export interface PluginLogger {
    debug: (message: string, ...args: any[]) => void;
    info: (message: string, ...args: any[]) => void;
    warn: (message: string, ...args: any[]) => void;
    error: (message: string, ...args: any[]) => void;
    setLevel: (level: LogLevel) => void;
}
/**
 * 订阅管理接口
 */
export interface PluginSubscriptions {
    /** 添加订阅 */
    add: (subscription: Disposable) => void;
    /** 清理所有订阅 */
    dispose: () => void;
}
/**
 * 可释放接口
 */
export interface Disposable {
    dispose: () => void;
}
/**
 * 插件权限枚举
 */
export declare enum PluginPermission {
    NETWORK_ACCESS = "network:access",
    STORAGE_READ = "storage:read",
    STORAGE_WRITE = "storage:write",
    ROUTER_NAVIGATE = "router:navigate",
    ROUTER_REGISTER = "router:register",
    COMPONENT_REGISTER = "component:register",
    COMPONENT_GLOBAL = "component:global",
    DATA_READ = "data:read",
    DATA_WRITE = "data:write",
    UI_MENU = "ui:menu",
    UI_TOOLBAR = "ui:toolbar",
    UI_PANEL = "ui:panel",
    SYSTEM_NOTIFICATION = "system:notification",
    SYSTEM_CLIPBOARD = "system:clipboard"
}
/**
 * 插件错误类型
 */
export declare enum PluginErrorType {
    LOAD_ERROR = "LOAD_ERROR",
    INSTALL_ERROR = "INSTALL_ERROR",
    ACTIVATE_ERROR = "ACTIVATE_ERROR",
    RUNTIME_ERROR = "RUNTIME_ERROR",
    PERMISSION_ERROR = "PERMISSION_ERROR",
    DEPENDENCY_ERROR = "DEPENDENCY_ERROR",
    VERSION_ERROR = "VERSION_ERROR",
    CONFIG_ERROR = "CONFIG_ERROR"
}
/**
 * 插件错误
 */
export declare class PluginError extends Error {
    type: PluginErrorType;
    pluginId: PluginId;
    cause?: Error | undefined;
    constructor(type: PluginErrorType, pluginId: PluginId, message: string, cause?: Error | undefined);
}
/**
 * 插件生命周期事件
 */
export declare enum PluginLifecycleEvent {
    BEFORE_INSTALL = "plugin:before-install",
    AFTER_INSTALL = "plugin:after-install",
    BEFORE_ACTIVATE = "plugin:before-activate",
    AFTER_ACTIVATE = "plugin:after-activate",
    BEFORE_DEACTIVATE = "plugin:before-deactivate",
    AFTER_DEACTIVATE = "plugin:after-deactivate",
    BEFORE_UNINSTALL = "plugin:before-uninstall",
    AFTER_UNINSTALL = "plugin:after-uninstall",
    ERROR = "plugin:error",
    STATUS_CHANGED = "plugin:status-changed"
}
/**
 * 扩展点事件
 */
export declare enum ExtensionEvent {
    ROUTE_REGISTERED = "extension:route-registered",
    ROUTE_UNREGISTERED = "extension:route-unregistered",
    COMPONENT_REGISTERED = "extension:component-registered",
    COMPONENT_UNREGISTERED = "extension:component-unregistered",
    MENU_REGISTERED = "extension:menu-registered",
    MENU_UNREGISTERED = "extension:menu-unregistered"
}
/**
 * 插件实例接口
 */
export interface Plugin {
    /** 插件 ID */
    id: PluginId;
    /** 插件清单 */
    manifest: PluginManifest;
    /** 插件状态 */
    status: PluginStatus;
    /** 插件上下文 */
    context: PluginContext;
    /** 激活插件 */
    activate: () => Promise<void>;
    /** 停用插件 */
    deactivate: () => Promise<void>;
    /** 卸载插件 */
    uninstall: () => Promise<void>;
    /** 获取配置 */
    getConfig: <T = any>() => T;
    /** 更新配置 */
    updateConfig: (config: any) => Promise<void>;
}
/**
 * 插件运行时接口
 */
export interface PluginRuntime {
    /** 加载插件 */
    load: (pluginId: PluginId, properties?: any) => Promise<Plugin>;
    /** 卸载插件 */
    unload: (pluginId: PluginId) => Promise<void>;
    /** 重载插件 */
    reload: (pluginId: PluginId, properties?: any) => Promise<void>;
    /** 获取插件实例 */
    get: (pluginId: PluginId) => Plugin | null;
    /** 获取所有插件 */
    getAll: () => Plugin[];
    /** 获取插件状态 */
    getStatus: (pluginId: PluginId) => PluginStatus;
    /** 监听生命周期事件 */
    on: (event: PluginLifecycleEvent, handler: Function) => Disposable;
    /** 触发事件 */
    emit: (event: PluginLifecycleEvent, ...args: any[]) => void;
}
/**
 * 插件UI配置（从plugin-ui.yml解析）
 */
export interface PluginUIConfig {
    /** 插件ID */
    pluginId: string;
    /** 插件名称 */
    name: string;
    /** 插件版本 */
    version: string;
    /** 资源配置 */
    resources: ResourceConfig[];
    /** 菜单配置 */
    menus: MenuConfig[];
    /** 路由配置 */
    routes: RouteConfig[];
    /** 角色配置 */
    roles: RoleConfig[];
}
/**
 * 资源配置
 */
export interface ResourceConfig {
    /** 资源ID */
    resourceId: string;
    /** 资源名称 */
    resourceName: string;
    /** 资源类型 */
    resourceType: 'MENU' | 'API' | 'DATA' | 'FEATURE';
    /** 资源路径 */
    path?: string;
    /** HTTP方法 */
    method?: string;
    /** 操作列表 */
    operations?: string[];
    /** 描述 */
    description?: string;
    /** 父资源ID */
    parent?: string;
    /** 元数据 */
    metadata?: Record<string, any>;
}
/**
 * 菜单配置
 */
export interface MenuConfig {
    /** 菜单ID */
    id: string;
    /** 菜单标题 */
    title: string;
    /** 菜单图标 */
    icon?: string;
    /** 路由路径 */
    path?: string;
    /** 父菜单ID */
    parent?: string;
    /** 排序 */
    order?: number;
    /** 是否可见 */
    visible?: boolean;
    /** 菜单类型 */
    type?: 'layout' | 'standalone';
    /** 关联资源ID */
    resourceId?: string;
    /** 所需权限 */
    requiredPermissions?: string[];
}
/**
 * 路由配置
 */
export interface RouteConfig {
    /** 路由路径 */
    path: string;
    /** 路由名称 */
    name: string;
    /** 组件名称 */
    component: string;
    /** 路由类型 */
    type?: 'layout' | 'standalone';
    /** 路由元信息 */
    meta?: {
        title?: string;
        icon?: string;
        requiresAuth?: boolean;
        [key: string]: any;
    };
    /** 所需权限 */
    requiredPermissions?: string[];
    /** 子路由 */
    children?: RouteConfig[];
}
/**
 * 角色配置
 */
export interface RoleConfig {
    /** 角色编码 */
    roleCode: string;
    /** 角色名称 */
    roleName: string;
    /** 描述 */
    description?: string;
    /** 权限列表 */
    permissions: string[];
}
//# sourceMappingURL=plugin-system.d.ts.map