# @gress/plugin-bridge

Gress æ’ä»¶æ¡¥æ¥æ ¸å¿ƒåŒ… - æä¾›æ’ä»¶ä¸å®¿ä¸»åº”ç”¨é€šä¿¡çš„æ ‡å‡† API

## ğŸ“¦ å®‰è£…

```bash
npm install @gress/plugin-bridge
# or
yarn add @gress/plugin-bridge
# or
pnpm add @gress/plugin-bridge
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åœ¨ä¸»åº”ç”¨ä¸­åˆ›å»ºæ’ä»¶æ¡¥

```typescript
import { createPluginBridge, exposePluginBridge } from '@gress/plugin-bridge'

const bridge = createPluginBridge({
  app,
  router,
  pinia,
  http: requestClient,
  permissions: [
    PluginPermission.NETWORK_ACCESS,
    PluginPermission.ROUTER_NAVIGATE,
    // ... å…¶ä»–æƒé™
  ]
})

// æš´éœ²ç»™æ’ä»¶ä½¿ç”¨
exposePluginBridge(bridge)
```

### åœ¨æ’ä»¶ä¸­ä½¿ç”¨æ¡¥æ¥åŠŸèƒ½

```typescript
import { useHostBridge, useIcon } from '@gress/plugin-bridge'

// è·å–å®¿ä¸»èƒ½åŠ›
const { router, message, http, events } = useHostBridge()

// è·¯ç”±å¯¼èˆª
router.push('/some-path')

// æ˜¾ç¤ºæ¶ˆæ¯
message.success('æ“ä½œæˆåŠŸ')

// HTTP è¯·æ±‚
const data = await http.get('/api/data')

// ä½¿ç”¨å›¾æ ‡
const HomeIcon = useIcon('HomeOutline')
```

## ğŸ“š API æ–‡æ¡£

### Composables

#### `useHostBridge()`

è·å–å®¿ä¸»æ¡¥æ¥å¯¹è±¡ï¼Œæä¾›å¯¹ä¸»åº”ç”¨èƒ½åŠ›çš„è®¿é—®ã€‚

**è¿”å›å€¼ï¼š**
- `bridge` - å®Œæ•´çš„æ¡¥æ¥å¯¹è±¡
- `router` - è·¯ç”± API
- `route` - å½“å‰è·¯ç”±
- `message` - æ¶ˆæ¯æç¤º API
- `dialog` - å¯¹è¯æ¡† API
- `notification` - é€šçŸ¥ API
- `loadingBar` - åŠ è½½æ¡ API
- `http` - HTTP å®¢æˆ·ç«¯
- `events` - äº‹ä»¶æ€»çº¿
- `utils` - å·¥å…·å‡½æ•°

#### `useIcon(iconName: string)`

è·å–å›¾æ ‡ç»„ä»¶ã€‚

```typescript
const HomeIcon = useIcon('HomeOutline')
```

#### `useIcons(iconNames: string[])`

æ‰¹é‡è·å–å›¾æ ‡ç»„ä»¶ã€‚

```typescript
const icons = useIcons(['HomeOutline', 'AddOutline', 'SearchOutline'])
```

### æ ¸å¿ƒåŠŸèƒ½

#### `createPluginBridge(options)`

åˆ›å»ºæ’ä»¶æ¡¥å®ä¾‹ï¼ˆä¸»åº”ç”¨ä½¿ç”¨ï¼‰ã€‚

#### `createPluginContext(pluginId, manifest, bridge)`

åˆ›å»ºæ’ä»¶ä¸Šä¸‹æ–‡ï¼ˆæ’ä»¶ç³»ç»Ÿå†…éƒ¨ä½¿ç”¨ï¼‰ã€‚

#### `createEventEmitter()`

åˆ›å»ºäº‹ä»¶å‘å°„å™¨ã€‚

## ğŸ”’ æƒé™ç³»ç»Ÿ

æ’ä»¶éœ€è¦å£°æ˜æ‰€éœ€æƒé™ï¼š

```typescript
export const manifest: PluginManifest = {
  id: 'my-plugin',
  name: 'My Plugin',
  version: '1.0.0',
  permissions: [
    PluginPermission.NETWORK_ACCESS,
    PluginPermission.ROUTER_NAVIGATE,
    PluginPermission.DATA_READ
  ]
}
```

å¯ç”¨æƒé™ï¼š
- `NETWORK_ACCESS` - ç½‘ç»œè®¿é—®
- `ROUTER_NAVIGATE` - è·¯ç”±å¯¼èˆª
- `ROUTER_REGISTER` - æ³¨å†Œè·¯ç”±
- `COMPONENT_REGISTER` - æ³¨å†Œç»„ä»¶
- `DATA_READ` - è¯»å–æ•°æ®
- `DATA_WRITE` - å†™å…¥æ•°æ®
- `SYSTEM_NOTIFICATION` - ç³»ç»Ÿé€šçŸ¥

## ğŸ“„ License

MIT
