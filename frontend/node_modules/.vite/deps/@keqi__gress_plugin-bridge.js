import {
  computed
} from "./chunk-QCNYTOAH.js";
import "./chunk-UVKRO5ER.js";

// node_modules/@keqi.gress/plugin-bridge/dist/index.js
var PluginStatus = ((PluginStatus2) => {
  PluginStatus2["UNINSTALLED"] = "uninstalled";
  PluginStatus2["INSTALLING"] = "installing";
  PluginStatus2["INSTALLED"] = "installed";
  PluginStatus2["ACTIVATING"] = "activating";
  PluginStatus2["ACTIVE"] = "active";
  PluginStatus2["DEACTIVATING"] = "deactivating";
  PluginStatus2["DEACTIVATED"] = "deactivated";
  PluginStatus2["UNINSTALLING"] = "uninstalling";
  PluginStatus2["ERROR"] = "error";
  return PluginStatus2;
})(PluginStatus || {});
var LoadStrategy = ((LoadStrategy2) => {
  LoadStrategy2["EAGER"] = "eager";
  LoadStrategy2["LAZY"] = "lazy";
  LoadStrategy2["PREFETCH"] = "prefetch";
  LoadStrategy2["ON_DEMAND"] = "on-demand";
  return LoadStrategy2;
})(LoadStrategy || {});
var LogLevel = ((LogLevel2) => {
  LogLevel2["DEBUG"] = "debug";
  LogLevel2["INFO"] = "info";
  LogLevel2["WARN"] = "warn";
  LogLevel2["ERROR"] = "error";
  return LogLevel2;
})(LogLevel || {});
var PluginPermission = ((PluginPermission2) => {
  PluginPermission2["NETWORK_ACCESS"] = "network:access";
  PluginPermission2["STORAGE_READ"] = "storage:read";
  PluginPermission2["STORAGE_WRITE"] = "storage:write";
  PluginPermission2["ROUTER_NAVIGATE"] = "router:navigate";
  PluginPermission2["ROUTER_REGISTER"] = "router:register";
  PluginPermission2["COMPONENT_REGISTER"] = "component:register";
  PluginPermission2["COMPONENT_GLOBAL"] = "component:global";
  PluginPermission2["DATA_READ"] = "data:read";
  PluginPermission2["DATA_WRITE"] = "data:write";
  PluginPermission2["UI_MENU"] = "ui:menu";
  PluginPermission2["UI_TOOLBAR"] = "ui:toolbar";
  PluginPermission2["UI_PANEL"] = "ui:panel";
  PluginPermission2["SYSTEM_NOTIFICATION"] = "system:notification";
  PluginPermission2["SYSTEM_CLIPBOARD"] = "system:clipboard";
  return PluginPermission2;
})(PluginPermission || {});
var PluginErrorType = ((PluginErrorType2) => {
  PluginErrorType2["LOAD_ERROR"] = "LOAD_ERROR";
  PluginErrorType2["INSTALL_ERROR"] = "INSTALL_ERROR";
  PluginErrorType2["ACTIVATE_ERROR"] = "ACTIVATE_ERROR";
  PluginErrorType2["RUNTIME_ERROR"] = "RUNTIME_ERROR";
  PluginErrorType2["PERMISSION_ERROR"] = "PERMISSION_ERROR";
  PluginErrorType2["DEPENDENCY_ERROR"] = "DEPENDENCY_ERROR";
  PluginErrorType2["VERSION_ERROR"] = "VERSION_ERROR";
  PluginErrorType2["CONFIG_ERROR"] = "CONFIG_ERROR";
  return PluginErrorType2;
})(PluginErrorType || {});
var PluginError = class extends Error {
  constructor(type, pluginId, message, cause) {
    super(message);
    this.type = type;
    this.pluginId = pluginId;
    this.cause = cause;
    this.name = "PluginError";
  }
};
var PluginLifecycleEvent = ((PluginLifecycleEvent2) => {
  PluginLifecycleEvent2["BEFORE_INSTALL"] = "plugin:before-install";
  PluginLifecycleEvent2["AFTER_INSTALL"] = "plugin:after-install";
  PluginLifecycleEvent2["BEFORE_ACTIVATE"] = "plugin:before-activate";
  PluginLifecycleEvent2["AFTER_ACTIVATE"] = "plugin:after-activate";
  PluginLifecycleEvent2["BEFORE_DEACTIVATE"] = "plugin:before-deactivate";
  PluginLifecycleEvent2["AFTER_DEACTIVATE"] = "plugin:after-deactivate";
  PluginLifecycleEvent2["BEFORE_UNINSTALL"] = "plugin:before-uninstall";
  PluginLifecycleEvent2["AFTER_UNINSTALL"] = "plugin:after-uninstall";
  PluginLifecycleEvent2["ERROR"] = "plugin:error";
  PluginLifecycleEvent2["STATUS_CHANGED"] = "plugin:status-changed";
  return PluginLifecycleEvent2;
})(PluginLifecycleEvent || {});
var ExtensionEvent = ((ExtensionEvent2) => {
  ExtensionEvent2["ROUTE_REGISTERED"] = "extension:route-registered";
  ExtensionEvent2["ROUTE_UNREGISTERED"] = "extension:route-unregistered";
  ExtensionEvent2["COMPONENT_REGISTERED"] = "extension:component-registered";
  ExtensionEvent2["COMPONENT_UNREGISTERED"] = "extension:component-unregistered";
  ExtensionEvent2["MENU_REGISTERED"] = "extension:menu-registered";
  ExtensionEvent2["MENU_UNREGISTERED"] = "extension:menu-unregistered";
  return ExtensionEvent2;
})(ExtensionEvent || {});
function createPluginBridge(options) {
  const { app, router, pinia, http, permissions = [] } = options;
  const checkPermission = (permission) => {
    return permissions.includes(permission);
  };
  return {
    version: "1.0.0",
    http: createHttpClient(http, checkPermission),
    router: createRouterBridge(router, checkPermission),
    store: createStoreBridge(pinia, checkPermission),
    ui: createUIBridge(),
    events: createEventBus(),
    utils: createUtilsBridge(),
    auth: createAuthBridge(),
    i18n: createI18nBridge(),
    notification: createNotificationBridge(checkPermission)
  };
}
function createHttpClient(http, checkPermission) {
  const requirePermission = () => {
    if (!checkPermission(PluginPermission.NETWORK_ACCESS)) {
      throw new Error("Plugin does not have NETWORK_ACCESS permission");
    }
  };
  return {
    get: async (url, config) => {
      requirePermission();
      return http.get(url, config);
    },
    post: async (url, data, config) => {
      requirePermission();
      return http.post(url, data, config);
    },
    put: async (url, data, config) => {
      requirePermission();
      return http.put(url, data, config);
    },
    delete: async (url, config) => {
      requirePermission();
      return http.delete(url, config);
    },
    patch: async (url, data, config) => {
      requirePermission();
      return http.patch(url, data, config);
    },
    request: async (config) => {
      requirePermission();
      return http.request(config);
    }
  };
}
function createRouterBridge(router, checkPermission) {
  return {
    push: (...args) => {
      if (!checkPermission(PluginPermission.ROUTER_NAVIGATE)) {
        throw new Error("Plugin does not have ROUTER_NAVIGATE permission");
      }
      return router.push(...args);
    },
    replace: (...args) => {
      if (!checkPermission(PluginPermission.ROUTER_NAVIGATE)) {
        throw new Error("Plugin does not have ROUTER_NAVIGATE permission");
      }
      return router.replace(...args);
    },
    go: (delta) => {
      if (!checkPermission(PluginPermission.ROUTER_NAVIGATE)) {
        throw new Error("Plugin does not have ROUTER_NAVIGATE permission");
      }
      router.go(delta);
    },
    back: () => {
      if (!checkPermission(PluginPermission.ROUTER_NAVIGATE)) {
        throw new Error("Plugin does not have ROUTER_NAVIGATE permission");
      }
      router.back();
    },
    forward: () => {
      if (!checkPermission(PluginPermission.ROUTER_NAVIGATE)) {
        throw new Error("Plugin does not have ROUTER_NAVIGATE permission");
      }
      router.forward();
    },
    currentRoute: router.currentRoute,
    addRoute: (route) => {
      if (!checkPermission(PluginPermission.ROUTER_REGISTER)) {
        throw new Error("Plugin does not have ROUTER_REGISTER permission");
      }
      const routeType = route.type || "layout";
      if (routeType === "layout") {
        router.addRoute("MainLayout", route);
      } else {
        router.addRoute(route);
      }
    },
    removeRoute: (name) => {
      if (!checkPermission(PluginPermission.ROUTER_REGISTER)) {
        throw new Error("Plugin does not have ROUTER_REGISTER permission");
      }
      router.removeRoute(name);
    },
    hasRoute: (name) => router.hasRoute(name),
    getRoutes: () => router.getRoutes(),
    // 路由守卫注册
    beforeEach: (guard) => {
      if (!checkPermission(PluginPermission.ROUTER_REGISTER)) {
        throw new Error("Plugin does not have ROUTER_REGISTER permission");
      }
      return router.beforeEach(guard);
    },
    afterEach: (hook) => {
      if (!checkPermission(PluginPermission.ROUTER_REGISTER)) {
        throw new Error("Plugin does not have ROUTER_REGISTER permission");
      }
      return router.afterEach(hook);
    },
    beforeResolve: (guard) => {
      if (!checkPermission(PluginPermission.ROUTER_REGISTER)) {
        throw new Error("Plugin does not have ROUTER_REGISTER permission");
      }
      return router.beforeResolve(guard);
    }
  };
}
function createStoreBridge(pinia, checkPermission) {
  return {
    pinia,
    getStore: (id) => {
      if (!checkPermission(PluginPermission.DATA_READ)) {
        throw new Error("Plugin does not have DATA_READ permission");
      }
      const stores = pinia._s;
      return stores ? stores.get(id) : void 0;
    },
    hasStore: (id) => {
      const stores = pinia._s;
      return stores ? stores.has(id) : false;
    }
  };
}
function createUIBridge(_app, _checkPermission) {
  let naiveUI = null;
  if (typeof window !== "undefined") {
    naiveUI = window.NaiveUI;
  }
  return {
    components: naiveUI || {},
    message: naiveUI == null ? void 0 : naiveUI.useMessage,
    dialog: naiveUI == null ? void 0 : naiveUI.useDialog,
    notification: naiveUI == null ? void 0 : naiveUI.useNotification,
    loadingBar: naiveUI == null ? void 0 : naiveUI.useLoadingBar,
    theme: {
      current: "light",
      set: (theme) => {
        console.log("Set theme:", theme);
      },
      get: () => "light"
    }
  };
}
function createEventBus() {
  const events = /* @__PURE__ */ new Map();
  return {
    on: (event, handler) => {
      if (!events.has(event)) {
        events.set(event, /* @__PURE__ */ new Set());
      }
      events.get(event).add(handler);
    },
    off: (event, handler) => {
      const handlers = events.get(event);
      if (handlers) {
        handlers.delete(handler);
      }
    },
    once: (event, handler) => {
      const wrappedHandler = (...args) => {
        var _a;
        handler(...args);
        (_a = events.get(event)) == null ? void 0 : _a.delete(wrappedHandler);
      };
      if (!events.has(event)) {
        events.set(event, /* @__PURE__ */ new Set());
      }
      events.get(event).add(wrappedHandler);
    },
    emit: (event, ...args) => {
      const handlers = events.get(event);
      if (handlers) {
        handlers.forEach((handler) => {
          try {
            handler(...args);
          } catch (error) {
            console.error(`Error in event handler for "${event}":`, error);
          }
        });
      }
    }
  };
}
function createUtilsBridge() {
  return {
    formatDate: (date, _format) => {
      const d = typeof date === "string" ? new Date(date) : date;
      return d.toISOString();
    },
    deepClone: (obj) => {
      return JSON.parse(JSON.stringify(obj));
    },
    debounce: (fn, delay) => {
      let timeoutId;
      return (...args) => {
        clearTimeout(timeoutId);
        timeoutId = setTimeout(() => fn(...args), delay);
      };
    },
    throttle: (fn, delay) => {
      let lastCall = 0;
      return (...args) => {
        const now = Date.now();
        if (now - lastCall >= delay) {
          lastCall = now;
          fn(...args);
        }
      };
    },
    uuid: () => {
      return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (c) => {
        const r = Math.random() * 16 | 0;
        const v = c === "x" ? r : r & 3 | 8;
        return v.toString(16);
      });
    }
  };
}
function createAuthBridge(_checkPermission) {
  return {
    hasPermission: (_permission) => {
      return true;
    },
    requestPermission: async (_permission) => {
      return true;
    },
    getCurrentUser: () => {
      return null;
    },
    isAuthenticated: () => {
      return true;
    }
  };
}
function createI18nBridge(_checkPermission) {
  return {
    locale: "zh-CN",
    t: (key, _params) => {
      return key;
    },
    setLocale: (locale) => {
      console.log("Set locale:", locale);
    },
    addMessages: (locale, messages) => {
      console.log("Add messages:", locale, messages);
    }
  };
}
function createNotificationBridge(checkPermission) {
  const requirePermission = () => {
    if (!checkPermission(PluginPermission.SYSTEM_NOTIFICATION)) {
      throw new Error("Plugin does not have SYSTEM_NOTIFICATION permission");
    }
  };
  const getMessageApi = () => {
    const w = window;
    if (w.$message) {
      return w.$message;
    }
    console.warn("[PluginBridge] window.$message not available, falling back to console");
    return null;
  };
  return {
    success: (message, options) => {
      requirePermission();
      const messageApi = getMessageApi();
      if (messageApi) {
        messageApi.success(message, options);
      } else {
        console.log("[Notification] Success:", message, options);
      }
    },
    error: (message, options) => {
      requirePermission();
      const messageApi = getMessageApi();
      if (messageApi) {
        messageApi.error(message, options);
      } else {
        console.error("[Notification] Error:", message, options);
      }
    },
    warning: (message, options) => {
      requirePermission();
      const messageApi = getMessageApi();
      if (messageApi) {
        messageApi.warning(message, options);
      } else {
        console.warn("[Notification] Warning:", message, options);
      }
    },
    info: (message, options) => {
      requirePermission();
      const messageApi = getMessageApi();
      if (messageApi) {
        messageApi.info(message, options);
      } else {
        console.info("[Notification] Info:", message, options);
      }
    }
  };
}
function exposePluginBridge(bridge) {
  if (typeof window !== "undefined") {
    window.GressBridge = bridge;
  }
}
function createPluginContext(pluginId, manifest, bridge) {
  var _a;
  return {
    pluginId,
    manifest,
    bridge,
    config: ((_a = manifest.config) == null ? void 0 : _a.default) || {},
    storage: createPluginStorage(pluginId),
    logger: createPluginLogger(pluginId),
    subscriptions: createPluginSubscriptions()
  };
}
function createPluginStorage(pluginId) {
  const storageKey = `gress-plugin-${pluginId}`;
  const loadData = () => {
    try {
      const data2 = localStorage.getItem(storageKey);
      return data2 ? JSON.parse(data2) : {};
    } catch (error) {
      console.error(`[Plugin Storage] Failed to load data for ${pluginId}:`, error);
      return {};
    }
  };
  const saveData = (data2) => {
    try {
      localStorage.setItem(storageKey, JSON.stringify(data2));
    } catch (error) {
      console.error(`[Plugin Storage] Failed to save data for ${pluginId}:`, error);
    }
  };
  let data = loadData();
  return {
    get: (key, defaultValue) => {
      return data[key] !== void 0 ? data[key] : defaultValue;
    },
    set: (key, value) => {
      data[key] = value;
      saveData(data);
    },
    remove: (key) => {
      delete data[key];
      saveData(data);
    },
    clear: () => {
      data = {};
      localStorage.removeItem(storageKey);
    },
    keys: () => {
      return Object.keys(data);
    },
    has: (key) => {
      return key in data;
    }
  };
}
function createPluginLogger(pluginId) {
  let currentLevel = LogLevel.INFO;
  const levels = {
    [LogLevel.DEBUG]: 0,
    [LogLevel.INFO]: 1,
    [LogLevel.WARN]: 2,
    [LogLevel.ERROR]: 3
  };
  const shouldLog = (level) => {
    return levels[level] >= levels[currentLevel];
  };
  const formatMessage = (level, message) => {
    const timestamp = (/* @__PURE__ */ new Date()).toISOString();
    return `[${timestamp}] [${pluginId}] [${level.toUpperCase()}] ${message}`;
  };
  return {
    debug: (message, ...args) => {
      if (shouldLog(LogLevel.DEBUG)) {
        console.debug(formatMessage(LogLevel.DEBUG, message), ...args);
      }
    },
    info: (message, ...args) => {
      if (shouldLog(LogLevel.INFO)) {
        console.info(formatMessage(LogLevel.INFO, message), ...args);
      }
    },
    warn: (message, ...args) => {
      if (shouldLog(LogLevel.WARN)) {
        console.warn(formatMessage(LogLevel.WARN, message), ...args);
      }
    },
    error: (message, ...args) => {
      if (shouldLog(LogLevel.ERROR)) {
        console.error(formatMessage(LogLevel.ERROR, message), ...args);
      }
    },
    setLevel: (level) => {
      currentLevel = level;
    }
  };
}
function createPluginSubscriptions() {
  const subscriptions = [];
  return {
    add: (subscription) => {
      subscriptions.push(subscription);
    },
    dispose: () => {
      for (const subscription of subscriptions) {
        try {
          subscription.dispose();
        } catch (error) {
          console.error("[Plugin Subscriptions] Error disposing subscription:", error);
        }
      }
      subscriptions.length = 0;
    }
  };
}
function createEventEmitter() {
  const events = /* @__PURE__ */ new Map();
  return {
    on(event, handler) {
      if (!events.has(event)) {
        events.set(event, /* @__PURE__ */ new Set());
      }
      events.get(event).add(handler);
    },
    off(event, handler) {
      const handlers = events.get(event);
      if (handlers) {
        handlers.delete(handler);
        if (handlers.size === 0) {
          events.delete(event);
        }
      }
    },
    once(event, handler) {
      const wrappedHandler = (...args) => {
        handler(...args);
        this.off(event, wrappedHandler);
      };
      this.on(event, wrappedHandler);
    },
    emit(event, ...args) {
      const handlers = events.get(event);
      if (handlers) {
        const handlersCopy = Array.from(handlers);
        for (const handler of handlersCopy) {
          try {
            handler(...args);
          } catch (error) {
            console.error(`[EventEmitter] Error in handler for "${event}":`, error);
          }
        }
      }
    },
    clear() {
      events.clear();
    }
  };
}
function useIcon(iconName) {
  const Ionicons5 = window.Ionicons5;
  if (!Ionicons5) {
    console.warn("[useIcon] Ionicons5 not found on window");
    return null;
  }
  const icon = Ionicons5[iconName];
  if (!icon) {
    console.warn(`[useIcon] Icon not found: ${iconName}`);
    return null;
  }
  return icon;
}
function useIconComputed(iconName) {
  return computed(() => {
    const name = typeof iconName === "function" ? iconName() : iconName;
    return useIcon(name);
  });
}
var Icons = {
  // 基础操作
  Add: () => useIcon("AddOutline"),
  Remove: () => useIcon("RemoveOutline"),
  Close: () => useIcon("CloseOutline"),
  Save: () => useIcon("SaveOutline"),
  Edit: () => useIcon("CreateOutline"),
  Delete: () => useIcon("TrashOutline"),
  Refresh: () => useIcon("RefreshOutline"),
  Search: () => useIcon("SearchOutline"),
  // 导航
  Home: () => useIcon("HomeOutline"),
  Back: () => useIcon("ArrowBackOutline"),
  Forward: () => useIcon("ArrowForwardOutline"),
  Menu: () => useIcon("MenuOutline"),
  // 状态
  Success: () => useIcon("CheckmarkCircleOutline"),
  Error: () => useIcon("CloseCircleOutline"),
  Warning: () => useIcon("WarningOutline"),
  Info: () => useIcon("InformationCircleOutline"),
  // 文件
  Document: () => useIcon("DocumentOutline"),
  Folder: () => useIcon("FolderOutline"),
  Download: () => useIcon("DownloadOutline"),
  Upload: () => useIcon("UploadOutline"),
  // 用户
  Person: () => useIcon("PersonOutline"),
  People: () => useIcon("PeopleOutline"),
  Settings: () => useIcon("SettingsOutline"),
  // 其他
  Eye: () => useIcon("EyeOutline"),
  EyeOff: () => useIcon("EyeOffOutline"),
  Filter: () => useIcon("FunnelOutline"),
  Calendar: () => useIcon("CalendarOutline"),
  Time: () => useIcon("TimeOutline"),
  Star: () => useIcon("StarOutline"),
  Heart: () => useIcon("HeartOutline"),
  // 应用相关
  Apps: () => useIcon("AppsOutline"),
  Grid: () => useIcon("GridOutline"),
  List: () => useIcon("ListOutline"),
  Code: () => useIcon("CodeOutline"),
  Terminal: () => useIcon("TerminalOutline"),
  // 通信
  Mail: () => useIcon("MailOutline"),
  Chatbubble: () => useIcon("ChatbubbleOutline"),
  Chatbubbles: () => useIcon("ChatbubblesOutline"),
  Notifications: () => useIcon("NotificationsOutline"),
  // 媒体
  Play: () => useIcon("PlayOutline"),
  Pause: () => useIcon("PauseOutline"),
  Stop: () => useIcon("StopOutline"),
  // 箭头
  ChevronUp: () => useIcon("ChevronUpOutline"),
  ChevronDown: () => useIcon("ChevronDownOutline"),
  ChevronBack: () => useIcon("ChevronBackOutline"),
  ChevronForward: () => useIcon("ChevronForwardOutline"),
  // 安全
  Lock: () => useIcon("LockClosedOutline"),
  Unlock: () => useIcon("LockOpenOutline"),
  Shield: () => useIcon("ShieldOutline"),
  Key: () => useIcon("KeyOutline")
};
function useIcons(iconNames) {
  const icons = {};
  iconNames.forEach((name) => {
    icons[name] = useIcon(name);
  });
  return icons;
}
function hasIcon(iconName) {
  const Ionicons5 = window.Ionicons5;
  return !!(Ionicons5 && Ionicons5[iconName]);
}
function getAllIconNames() {
  const Ionicons5 = window.Ionicons5;
  if (!Ionicons5) {
    return [];
  }
  return Object.keys(Ionicons5);
}
function searchIcons(keyword) {
  const allIcons = getAllIconNames();
  const lowerKeyword = keyword.toLowerCase();
  return allIcons.filter((name) => name.toLowerCase().includes(lowerKeyword));
}
function getHostBridge() {
  if (typeof window === "undefined") {
    throw new Error("[useHostBridge] Window is not defined");
  }
  const bridge = window.GressBridge;
  if (!bridge) {
    throw new Error("[useHostBridge] GressBridge is not available. Make sure the plugin is loaded in the host application.");
  }
  return bridge;
}
function createMessageApi(bridge) {
  const naiveUI = window.NaiveUI;
  if (naiveUI && naiveUI.useMessage) {
    return {
      success: (content, options) => {
        bridge.notification.success(content, options);
      },
      error: (content, options) => {
        bridge.notification.error(content, options);
      },
      warning: (content, options) => {
        bridge.notification.warning(content, options);
      },
      info: (content, options) => {
        bridge.notification.info(content, options);
      },
      loading: (content, options) => {
        bridge.notification.info(content, { ...options, duration: 0 });
      }
    };
  }
  return {
    success: (content, options) => {
      bridge.notification.success(content, options);
    },
    error: (content, options) => {
      bridge.notification.error(content, options);
    },
    warning: (content, options) => {
      bridge.notification.warning(content, options);
    },
    info: (content, options) => {
      bridge.notification.info(content, options);
    },
    loading: (content, options) => {
      bridge.notification.info(content, { ...options, duration: 0 });
    }
  };
}
function createDialogApi(_bridge) {
  const naiveUI = window.NaiveUI;
  if (naiveUI && naiveUI.useDialog) {
    return {
      success: (options) => {
        window.alert(options.content || options.title || "Success");
      },
      error: (options) => {
        window.alert(options.content || options.title || "Error");
      },
      warning: (options) => {
        if (window.confirm(options.content || options.title || "Warning")) {
          const callback = options.onPositiveClick || options.positiveClick;
          callback == null ? void 0 : callback();
        } else {
          const callback = options.onNegativeClick || options.negativeClick;
          callback == null ? void 0 : callback();
        }
      },
      info: (options) => {
        window.alert(options.content || options.title || "Info");
      },
      create: (options) => {
        const result = window.confirm(options.content || options.title || "");
        if (result) {
          const callback = options.onPositiveClick || options.positiveClick;
          callback == null ? void 0 : callback();
        } else {
          const callback = options.onNegativeClick || options.negativeClick;
          callback == null ? void 0 : callback();
        }
        return {
          destroy: () => {
          }
        };
      }
    };
  }
  return {
    success: (options) => {
      window.alert(options.content || options.title || "Success");
    },
    error: (options) => {
      window.alert(options.content || options.title || "Error");
    },
    warning: (options) => {
      if (window.confirm(options.content || options.title || "Warning")) {
        const callback = options.onPositiveClick || options.positiveClick;
        callback == null ? void 0 : callback();
      } else {
        const callback = options.onNegativeClick || options.negativeClick;
        callback == null ? void 0 : callback();
      }
    },
    info: (options) => {
      window.alert(options.content || options.title || "Info");
    },
    create: (options) => {
      const result = window.confirm(options.content || options.title || "");
      if (result) {
        const callback = options.onPositiveClick || options.positiveClick;
        callback == null ? void 0 : callback();
      } else {
        const callback = options.onNegativeClick || options.negativeClick;
        callback == null ? void 0 : callback();
      }
      return {
        destroy: () => {
        }
      };
    }
  };
}
function createNotificationApi(bridge) {
  return {
    success: (options) => {
      bridge.notification.success(options.content || options.title, options);
    },
    error: (options) => {
      bridge.notification.error(options.content || options.title, options);
    },
    warning: (options) => {
      bridge.notification.warning(options.content || options.title, options);
    },
    info: (options) => {
      bridge.notification.info(options.content || options.title, options);
    },
    create: (options) => {
      const type = options.type || "info";
      bridge.notification[type](options.content || options.title, options);
      return {
        destroy: () => {
        }
      };
    }
  };
}
function createLoadingBarApi(_bridge) {
  let loadingElement = null;
  return {
    start: () => {
      if (!loadingElement) {
        loadingElement = document.createElement("div");
        loadingElement.style.cssText = `
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          height: 2px;
          background: #18a058;
          z-index: 9999;
          transition: width 0.3s;
        `;
        document.body.appendChild(loadingElement);
      }
      loadingElement.style.width = "70%";
    },
    finish: () => {
      if (loadingElement) {
        loadingElement.style.width = "100%";
        setTimeout(() => {
          loadingElement == null ? void 0 : loadingElement.remove();
          loadingElement = null;
        }, 300);
      }
    },
    error: () => {
      if (loadingElement) {
        loadingElement.style.background = "#d03050";
        loadingElement.style.width = "100%";
        setTimeout(() => {
          loadingElement == null ? void 0 : loadingElement.remove();
          loadingElement = null;
        }, 300);
      }
    }
  };
}
function useHostBridge() {
  const bridge = getHostBridge();
  return {
    bridge,
    router: bridge.router,
    route: bridge.router.currentRoute,
    message: createMessageApi(bridge),
    dialog: createDialogApi(),
    notification: createNotificationApi(bridge),
    loadingBar: createLoadingBarApi(),
    http: bridge.http,
    events: bridge.events,
    utils: bridge.utils
  };
}
var useRouter = () => useHostBridge().router;
var useRoute = () => useHostBridge().route;
var useMessage = () => useHostBridge().message;
var useDialog = () => useHostBridge().dialog;
var useNotification = () => useHostBridge().notification;
var useLoadingBar = () => useHostBridge().loadingBar;
var useHttp = () => useHostBridge().http;
var useEvents = () => useHostBridge().events;
var useUtils = () => useHostBridge().utils;
export {
  ExtensionEvent,
  Icons,
  LoadStrategy,
  LogLevel,
  PluginError,
  PluginErrorType,
  PluginLifecycleEvent,
  PluginPermission,
  PluginStatus,
  createEventEmitter,
  createPluginBridge,
  createPluginContext,
  exposePluginBridge,
  getAllIconNames,
  hasIcon,
  searchIcons,
  useDialog,
  useEvents,
  useHostBridge,
  useHttp,
  useIcon,
  useIconComputed,
  useIcons,
  useLoadingBar,
  useMessage,
  useNotification,
  useRoute,
  useRouter,
  useUtils
};
//# sourceMappingURL=@keqi__gress_plugin-bridge.js.map
